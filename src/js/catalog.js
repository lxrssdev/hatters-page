// Datos de productos más extensos para el catálogo
// Datos de productos más extensos para el catálogo (usando todas tus imágenes)
const catalogProducts = [
  {
    id: 1,
    name: "REY CORDUROY",
    brand: "dandy",
    price: 849.00,
    image: "../img/dandysfondo1.png",
    description: "Gorra de estilo clásico con detalles en cuero.",
    featured: true
  },
  {
    id: 2,
    name: "THE DARTHER ALL BLACK SUEDE",
    brand: "31hats",
    price: 799.00,
    image: "../img/31_Hats_EL_Mago.png",
    description: "Diseño moderno ideal para el día a día.",
    featured: true
  },
  {
    id: 3,
    name: "BILLS FINALS WRAP TAN",
    brand: "barbas",
    price: 1899.00,
    image: "../img/barbas_hats.png",
    description: "Elegancia y comodidad en una gorra premium.",
    featured: true
  },
  {
    id: 4,
    name: "CORONA 3 HUESOS EL MAGO",
    brand: "dandy",
    price: 749.00,
    image: "../img/dandysfondo2.png",
    description: "Estilo retro con materiales de alta calidad.",
    featured: false
  },
  {
    id: 5,
    name: "BACKPACK BOYZ COLLECTION",
    brand: "31hats",
    price: 899.00,
    image: "../img/31_Hats_BackPack_Boyz.png",
    description: "Colección exclusiva Backpack Boyz.",
    featured: true
  },
  {
    id: 6,
    name: "CLOUDS EDITION",
    brand: "31hats",
    price: 759.00,
    image: "../img/31_hats_clouds.png",
    description: "Edición especial Clouds.",
    featured: false
  },
  {
    id: 7,
    name: "LA ELECTRIC SERIES",
    brand: "31hats",
    price: 829.00,
    image: "../img/31_Hats_LAElectric.png",
    description: "Serie LA Electric vibrante.",
    featured: false
  },
  {
    id: 8,
    name: "MY CAPS COLLECTION",
    brand: "31hats",
    price: 699.00,
    image: "../img/31_Hats_Mycaps.png",
    description: "Colección personal My Caps.",
    featured: false
  },
  {
    id: 9,
    name: "NY PEARLS LOVERS",
    brand: "31hats",
    price: 879.00,
    image: "../img/31_Hats_NYPearlsLovers.png",
    description: "Edición NY Pearls Lovers.",
    featured: false
  },
  {
    id: 10,
    name: "RICH KIDS LINE",
    brand: "31hats",
    price: 999.00,
    image: "../img/31_Hats_RichKids.png",
    description: "Línea exclusiva Rich Kids.",
    featured: true
  },
  {
    id: 11,
    name: "BLACK IN BLACK",
    brand: "31hats",
    price: 729.00,
    image: "../img/32_Hats_BlackInBlack.png",
    description: "Edición totalmente en negro.",
    featured: false
  },
  {
    id: 12,
    name: "CLASSIC FINO",
    brand: "dandy",
    price: 899.00,
    image: "../img/fino_brand.png",
    description: "Clásico estilo Fino.",
    featured: false
  },
  {
    id: 13,
    name: "VINTAGE COLLECTION",
    brand: "dandy",
    price: 799.00,
    image: "../img/dandysfondo3.png",
    description: "Colección vintage premium.",
    featured: false
  },
  {
    id: 14,
    name: "PREMIUM LEATHER",
    brand: "dandy",
    price: 1299.00,
    image: "../img/dandysfondo4.png",
    description: "Cuero premium de primera calidad.",
    featured: true
  },
  {
    id: 15,
    name: "URBAN STYLE",
    brand: "dandy",
    price: 849.00,
    image: "../img/dandysfondo5.png",
    description: "Estilo urbano contemporáneo.",
    featured: false
  },
  {
    id: 16,
    name: "LIMITED EDITION",
    brand: "dandy",
    price: 1599.00,
    image: "../img/dandysfondo6.png",
    description: "Edición limitada exclusiva.",
    featured: true
  },
  {
    id: 17,
    name: "SIGNATURE SERIES",
    brand: "dandy",
    price: 1199.00,
    image: "../img/dandysfondo7.png",
    description: "Serie signature de lujo.",
    featured: false
  },
  {
    id: 18,
    name: "HERITAGE COLLECTION",
    brand: "dandy",
    price: 949.00,
    image: "../img/dandysfondo8.png",
    description: "Colección heritage clásica.",
    featured: false
  },
  {
    id: 19,
    name: "MODERN CLASSIC",
    brand: "dandy",
    price: 899.00,
    image: "../img/dandysfondo9.png",
    description: "Clásico con toque moderno.",
    featured: false
  },
  {
    id: 20,
    name: "BARBAS PREMIUM",
    brand: "barbas",
    price: 1399.00,
    image: "../img/hats1.png",
    description: "Línea premium Barbas.",
    featured: true
  },
  {
    id: 21,
    name: "ELEGANCE LINE",
    brand: "barbas",
    price: 1299.00,
    image: "../img/hats2.png",
    description: "Línea elegancia exclusiva.",
    featured: false
  },
  {
    id: 22,
    name: "LUXURY COLLECTION",
    brand: "barbas",
    price: 1699.00,
    image: "../img/hats3.png",
    description: "Colección de lujo.",
    featured: true
  },
  {
    id: 23,
    name: "PREMIUM FIT",
    brand: "barbas",
    price: 1199.00,
    image: "../img/hats4.png",
    description: "Ajuste premium perfecto.",
    featured: false
  },
  {
    id: 24,
    name: "SIGNATURE EDITION",
    brand: "barbas",
    price: 1499.00,
    image: "../img/hats5.png",
    description: "Edición signature.",
    featured: false
  },
  {
    id: 25,
    name: "CLASSIC SERIES",
    brand: "barbas",
    price: 999.00,
    image: "../img/hats6.png",
    description: "Serie clásica renovada.",
    featured: false
  },
  {
    id: 26,
    name: "DELUXE LINE",
    brand: "barbas",
    price: 1799.00,
    image: "../img/hats7.png",
    description: "Línea deluxe exclusiva.",
    featured: true
  }
];

// ... (el resto del código del catalog.js se mantiene igual) ...

// Actualizar la función displayProducts para manejar errores de imagen
function displayProducts(products) {
  const container = document.getElementById('productsContainer');
  
  if (!container) return;
  
  if (products.length === 0) {
    container.innerHTML = `
      <div class="col-12 text-center py-5">
        <i class="bi bi-search display-1 text-muted"></i>
        <h3 class="mt-3">No se encontraron productos</h3>
        <p>Intenta con otros términos de búsqueda o filtros.</p>
      </div>
    `;
    return;
  }
  
  let html = '';
  products.forEach(product => {
    html += `
      <div class="catalog-product">
        <img src="${product.image}" class="catalog-product-img" alt="${product.name}"
             onerror="this.src='https://via.placeholder.com/300x300/333333/ffffff?text=Imagen+No+Disponible'">
        <div class="catalog-product-info">
          <span class="catalog-product-brand">${getBrandName(product.brand)}</span>
          <h3 class="catalog-product-title">${product.name}</h3>
          <p class="catalog-product-price">$${product.price.toFixed(2)}</p>
          <button class="catalog-product-btn add-to-cart" data-id="${product.id}">
            Agregar al carrito
          </button>
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
}

// Variables globales
let currentFilter = 'all';
let currentSort = 'featured';
let currentSearch = '';

// Cargar catálogo al iniciar
document.addEventListener('DOMContentLoaded', function() {
  loadCatalog();
  setupEventListeners();
  
  // Verificar si hay un filtro de marca en la URL
  const urlParams = new URLSearchParams(window.location.search);
  const brandFilter = urlParams.get('brand');
  if (brandFilter) {
    filterByBrand(brandFilter);
    updateBrandDropdown(brandFilter);
  }
});

// Configurar event listeners
function setupEventListeners() {
  // Filtros por marca
  const filterButtons = document.querySelectorAll('.filter-buttons .btn');
  filterButtons.forEach(button => {
    button.addEventListener('click', function() {
      currentFilter = this.getAttribute('data-filter');
      applyFilters();
      
      // Actualizar estado activo en los filtros
      filterButtons.forEach(btn => btn.classList.remove('active'));
      this.classList.add('active');
    });
  });

  // Filtros del dropdown
  const dropdownFilters = document.querySelectorAll('.dropdown-item[data-filter]');
  dropdownFilters.forEach(item => {
    item.addEventListener('click', function(e) {
      e.preventDefault();
      currentFilter = this.getAttribute('data-filter');
      applyFilters();
      
      // Actualizar botones de filtro
      filterButtons.forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-filter') === currentFilter) {
          btn.classList.add('active');
        }
      });
    });
  });

  // Ordenamiento
  const sortSelect = document.getElementById('sortSelect');
  if (sortSelect) {
    sortSelect.addEventListener('change', function() {
      currentSort = this.value;
      applyFilters();
    });
  }

  // Búsqueda
  const searchInput = document.getElementById('catalogSearch');
  const searchButton = document.getElementById('searchButton');
  
  if (searchButton) {
    searchButton.addEventListener('click', performSearch);
  }
  
  if (searchInput) {
    searchInput.addEventListener('keyup', function(e) {
      if (e.key === 'Enter') {
        performSearch();
      }
    });
  }

  // Configurar carrito
  setupCartFunctionality();
}

// Realizar búsqueda
function performSearch() {
  const searchInput = document.getElementById('catalogSearch');
  if (searchInput) {
    currentSearch = searchInput.value.toLowerCase();
    applyFilters();
  }
}

// Filtrar por marca específica
function filterByBrand(brand) {
  currentFilter = brand;
  applyFilters();
  
  // Actualizar interfaz
  const filterButtons = document.querySelectorAll('.filter-buttons .btn');
  filterButtons.forEach(btn => {
    btn.classList.remove('active');
    if (btn.getAttribute('data-filter') === brand) {
      btn.classList.add('active');
    }
  });
}

// Actualizar dropdown de marcas
function updateBrandDropdown(brand) {
  const dropdownToggle = document.querySelector('.nav-link.dropdown-toggle');
  if (dropdownToggle) {
    dropdownToggle.textContent = getBrandName(brand).toUpperCase();
  }
}

// Aplicar todos los filtros
function applyFilters() {
  let filteredProducts = [...catalogProducts];
  
  // Filtrar por marca
  if (currentFilter !== 'all') {
    filteredProducts = filteredProducts.filter(product => product.brand === currentFilter);
  }
  
  // Filtrar por búsqueda
  if (currentSearch) {
    filteredProducts = filteredProducts.filter(product => 
      product.name.toLowerCase().includes(currentSearch) || 
      product.description.toLowerCase().includes(currentSearch)
    );
  }
  
  // Ordenar
  switch(currentSort) {
    case 'price-low':
      filteredProducts.sort((a, b) => a.price - b.price);
      break;
    case 'price-high':
      filteredProducts.sort((a, b) => b.price - a.price);
      break;
    case 'name':
      filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
      break;
    case 'featured':
    default:
      filteredProducts.sort((a, b) => b.featured - a.featured);
      break;
  }
  
  // Mostrar productos filtrados
  displayProducts(filteredProducts);
}

// Mostrar productos en el catálogo
function displayProducts(products) {
  const container = document.getElementById('productsContainer');
  
  if (!container) return;
  
  if (products.length === 0) {
    container.innerHTML = `
      <div class="col-12 text-center py-5">
        <i class="bi bi-search display-1 text-muted"></i>
        <h3 class="mt-3">No se encontraron productos</h3>
        <p>Intenta con otros términos de búsqueda o filtros.</p>
      </div>
    `;
    return;
  }
  
  let html = '';
  products.forEach(product => {
    html += `
      <div class="col-md-6 col-lg-4 col-xl-3">
        <div class="product-card">
          <img src="${product.image}" class="product-img w-100" alt="${product.name}">
          <div class="product-info">
            <h4 class="product-title">${product.name}</h4>
            <p class="product-description">${getBrandName(product.brand)}</p>
            <p class="product-price">$${product.price.toFixed(2)}</p>
            <button class="btn btn-dark w-100 add-to-cart" data-id="${product.id}">Agregar al carrito</button>
          </div>
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
}

// Cargar catálogo inicial
function loadCatalog() {
  applyFilters();
}

// Configurar funcionalidad del carrito
function setupCartFunctionality() {
  let cartCount = 0;
  const cartBadge = document.querySelector('.badge');
  
  // Event listeners para botones "Agregar al carrito"
  document.addEventListener('click', function(e) {
    if (e.target.classList.contains('add-to-cart')) {
      const productId = e.target.getAttribute('data-id');
      addToCart(productId);
      
      // Animación de confirmación
      const originalText = e.target.textContent;
      e.target.textContent = '¡Agregado!';
      e.target.disabled = true;
      e.target.classList.add('btn-success');
      
      setTimeout(() => {
        e.target.textContent = originalText;
        e.target.disabled = false;
        e.target.classList.remove('btn-success');
      }, 1500);
    }
  });
  
  // Función para agregar al carrito
  function addToCart(productId) {
    cartCount++;
    if (cartBadge) {
      cartBadge.textContent = cartCount;
    }
    
    // Aquí normalmente enviarías los datos al servidor
    console.log(`Producto ${productId} agregado al carrito. Total: ${cartCount}`);
    
    // Mostrar notificación (opcional)
    showCartNotification(productId);
  }
}

// Mostrar notificación de carrito
function showCartNotification(productId) {
  // Crear elemento de notificación
  const notification = document.createElement('div');
  notification.className = 'alert alert-success position-fixed top-0 end-0 m-3';
  notification.style.zIndex = '9999';
  notification.innerHTML = `
    <i class="bi bi-check-circle me-2"></i>
    Producto agregado al carrito
  `;
  
  document.body.appendChild(notification);
  
  // Remover después de 3 segundos
  setTimeout(() => {
    notification.remove();
  }, 3000);
}

// Obtener nombre de marca
function getBrandName(brandCode) {
  switch(brandCode) {
    case 'dandy': return 'Dandy Hats';
    case '31hats': return '31 Hats';
    case 'barbas': return 'Barbas Hats';
    default: return 'Hatters Club';
  }
}

// Efecto de scroll en el header
window.addEventListener('scroll', function() {
  const header = document.querySelector('.header');
  if (header) {
    if (window.scrollY > 100) {
      header.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.1)';
    } else {
      header.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.05)';
    }
  }
});
// ... (mantener todo el código anterior de catalog.js) ...

// Mostrar productos en el catálogo (VERSIÓN ACTUALIZADA PARA GRID)
function displayProducts(products) {
  const container = document.getElementById('productsContainer');
  
  if (!container) return;
  
  if (products.length === 0) {
    container.innerHTML = `
      <div class="col-12 text-center py-5">
        <i class="bi bi-search display-1 text-muted"></i>
        <h3 class="mt-3">No se encontraron productos</h3>
        <p>Intenta con otros términos de búsqueda o filtros.</p>
      </div>
    `;
    return;
  }
  
  let html = '';
  products.forEach(product => {
    html += `
      <div class="catalog-product">
        <img src="${product.image}" class="catalog-product-img" alt="${product.name}">
        <div class="catalog-product-info">
          <span class="catalog-product-brand">${getBrandName(product.brand)}</span>
          <h3 class="catalog-product-title">${product.name}</h3>
          <p class="catalog-product-price">$${product.price.toFixed(2)}</p>
          <button class="catalog-product-btn add-to-cart" data-id="${product.id}">
            Agregar al carrito
          </button>
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
}

// ... (el resto del código se mantiene igual) ...